-- Drop tables if they exist
DROP TABLE IF EXISTS USER;
DROP TABLE IF EXISTS DEPARTMENT;
DROP TABLE IF EXISTS USERTYPE;

-- Drop tables in lowercase (for case-sensitive systems)
DROP TABLE IF EXISTS user;
DROP TABLE IF EXISTS department;
DROP TABLE IF EXISTS usertype;

-- Create tables
CREATE TABLE DEPARTMENT (
    DEPTID INTEGER NOT NULL PRIMARY KEY,
    DEPTNAME VARCHAR(36) NOT NULL,
    PARENTID INTEGER,
    FOREIGN KEY (PARENTID) REFERENCES DEPARTMENT(DEPTID)
);

CREATE TABLE USERTYPE (
    TYPEID INTEGER NOT NULL PRIMARY KEY,
    TYPENAME VARCHAR(36) NOT NULL
);

-- Insert user types
INSERT INTO USERTYPE (TYPEID, TYPENAME) VALUES 
(100, 'Administrator'),
(101, 'Manager'),
(102, 'Regular User'),
(103, 'Contractor'),
(104, 'HR Staff'),
(105, 'Regular User'),
(106, 'External'),
(107, 'System'),
(108, 'Training');

CREATE TABLE USER (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    FIRSTNAME VARCHAR(250) NOT NULL,
    LASTNAME VARCHAR(250) NOT NULL,
    STREETADDR VARCHAR(50),
    CITY VARCHAR(50),
    STATE VARCHAR(2),
    ZIPCODE VARCHAR(50),
    TITLE VARCHAR(50),
    MANAGER VARCHAR(500),
    ISMANAGER CHAR(1),
    EDULEVEL VARCHAR(50),
    STATUS CHAR(1) NOT NULL,
    DEPTID INTEGER,
    TYPEID INTEGER,
    USERID VARCHAR(50),
    DATE_MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (DEPTID) REFERENCES DEPARTMENT(DEPTID),
    FOREIGN KEY (TYPEID) REFERENCES USERTYPE(TYPEID)
) AUTO_INCREMENT = 1;

-- Insert department data in correct order (parent departments first)
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (1,'ACME',null);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (111,'CORPORATE',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (110,'SALES',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (129,'INTERNATIONAL',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (123,'PRODUCT DIVISION',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (104,'GENERAL SERVICES',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (108,'EXTERNAL',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (5752,'WEALTH MANAGEMENT',1);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (5753,'RETAIL MARKETS',1);

-- Insert departments with dependencies
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (112,'IT',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (113,'ADMINISTRATION, FINANCE AND CONTROL',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (118,'AUDIT',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (119,'PROCUREMENT',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (120,'LEGAL',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (124,'RISK MANAGEMENT',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (125,'HUMAN RESOURCES',111);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (130,'CEO STAFF',111);

INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (105,'MARKETING',110);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (122,'CUSTOMER SERVICE',110);

INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (103,'COUNTRY MANAGER EMEA',129);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (106,'INTERNATIONAL HR',129);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (109,'COUNTRY MANAGER EAST EUROPE',129);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (115,'INT PLANNING AND CONTROL',129);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (116,'INTEGR, SAFETY AND OPERATION SUPPORT',129);

INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (101,'SOUTH',123);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (102,'QUALITY AND SECURITY',123);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (114,'CENTER',123);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (121,'COMPLIANCE AND ANTITRUST',123);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (126,'NORTH',123);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (127,'PRODUCT  DEVELOPMENT',123);

INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (128,'ADMINISTRATION',104);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (107,'SHARED AND FUNCTIONAL',112);
INSERT INTO DEPARTMENT (DEPTID,DEPTNAME,PARENTID) VALUES (117,'SYSTEMS ADMINISTRATION',112);

-- Insert user data
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Angela','Brown',null,'West Palm Beach','FL',null,null,null,'1','Upper Secondary','0',127,100,'ABrown',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Abigail','Gill',null,'New Orleans','LA',null,null,null,'1','Secondary','0',116,100,'AGill',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Angeline','Robertson',null,'Tacoma','WA',null,null,null,'1','Bachelor','0',120,100,'ARobertson',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Chad','Little',null,'Harlingen','TX',null,'Recruiter',null,'1','Upper Secondary','0',125,100,'CLittle',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Cassandra','Shaner',null,'Syracuse','NY',null,'Industry Energy Buyer',null,'1','Secondary','0',104,null,'CShaner',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Debora','Brittain',null,'Montgomery','AL',null,null,null,'1','Tertiary','0',105,100,'DBrittain',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('David','Fox',null,'Oakland','CA',null,null,null,'1','Upper Secondary','0',127,null,'DFox',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('David','Sparkman',null,'Mill Valley','CA',null,'Recruiter',null,'1','Upper Secondary','0',125,null,'DSparkman',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Elizabeth','Kimble',null,'Cleveland','OH',null,null,null,'1','Post-Secondary','0',114,100,'EKimble',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Helen','Hayward',null,'New York','NY',null,null,null,'1','NA','0',116,100,'HHayward',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Jasmine','Goodwin',null,'Madison','FL',null,null,null,'1','Upper Secondary','0',102,104,'JGoodwin',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Jean','Hicks',null,'Abbyville','KS',null,null,null,'1','Upper Secondary','0',111,100,'JHicks',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Jessica','Hillis',null,'High Point','MO',null,null,null,'1','Upper Secondary','0',114,100,'JHillis',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Jeffrey','Turner',null,'Los Angeles','CA',null,null,null,'1','Upper Secondary','0',111,null,'JTurner',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Leon','Dinh',null,'Mountain View','CA',null,null,null,'1','Upper Secondary','0',111,104,'LDinh',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Leann','Greenleaf',null,'Pittsburgh','PA',null,null,null,'1','Post-Secondary','0',118,100,'LGreenleaf',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Mark','Anderson',null,'Richmond','VA',null,null,null,'1','Upper Secondary','0',127,104,'MAnderson',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Mary','Nunez',null,'Butte','NE',null,null,null,'1','Upper Secondary','0',119,100,'MNunez',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Marcelo','Perez',null,'Laramie','WY',null,null,null,'1','Upper Secondary','0',104,104,'MPerez',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Mark','Powers',null,'Corpus Christi','TX',null,null,null,'1','Upper Secondary','0',105,104,'MPowers',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Misty','Scott',null,'Vineland','NJ',null,'Residential Energy Buyer',null,'1','Secondary','0',124,104,'MScott',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Rose','Bremner',null,'Manchester','NH',null,null,null,'1','Upper Secondary','0',111,100,'RBremner',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Robert','Fassett',null,'New York','NY',null,null,null,'1','Upper Secondary','0',125,null,'RFassett',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('Shirley','Chang',null,'Abbyville','KS',null,null,null,'1','Upper Secondary','0',111,100,'SChang',CURRENT_TIMESTAMP);
INSERT INTO USER (FIRSTNAME,LASTNAME,STREETADDR,CITY,STATE,ZIPCODE,TITLE,MANAGER,ISMANAGER,EDULEVEL,STATUS,DEPTID,TYPEID,USERID,DATE_MODIFIED) VALUES ('John','Smith',null,'Abbyville','KS',null,null,null,'1','Upper Secondary','0',111,100,'JSmith',CURRENT_TIMESTAMP);
